<!DOCTYPE html>
<html lang="es">
    <%- include('../partials/head', {
        'title': "Perfil",
        'css': ["/css/registerstyles.css"],
    }) %>   
    <body>
        <%- include('../partials/header') %>
        <main>
            
            <form method="POST" action="/users/edit/<%= locals.userLogged.id %>" enctype="multipart/form-data">
                <h2>Hola <%= locals.userLogged.first_name %></h2>
                <div id="formulary">
                    <section class="camp">
                        <p class="label"><label for="first_name">Nombre:</label></p>
                        <p class="input">
                            <input 
                                type="text" 
                                placeholder="Ingresa tu nombre" 
                                id="first_name" 
                                name="first_name"
                                value= "<%= locals.oldData ? locals.oldData.first_name : userLogged.first_name %>"
                                required
                                disabled
                        ></p>
                        <% if (locals.errors && errors.first_name) { %>
                            <div class="input-invalid">
                                <%= errors.first_name.msg %>
                            </div>
                        <% } %>
                    </section>
                    <section class="camp">
                        <p class="label"><label for="last_name">Apellido:</label></p>
                        <p class="input">
                            <input 
                                type="text" 
                                placeholder="Ingresa tu apellido" 
                                id="last_name" 
                                name="last_name"
                                value= "<%= locals.oldData ? oldData.last_name : locals.userLogged.last_name %>"
                                required
                                disabled
                            >
                        </p>
                        <% if (locals.errors && errors.last_name) { %>
                            <div class="input-invalid">
                                <%= errors.last_name.msg %>
                            </div>
                        <% } %>
                    </section>
                    <section class="camp">
                        <p class="label"><label for="email">Correo electronico:</label></p>
                        <p class="input">
                            <input 
                                type="email" 
                                placeholder="Ingresa tu email"
                                id="email" 
                                name="email"
                                value= "<%= locals.oldData ? oldData.email : locals.userLogged.email %>"
                                required
                                disabled
                            >
                        </p>
                        <% if (locals.errors && errors.email) { %>
                            <div class="input-invalid">
                                <%= errors.email.msg %>
                            </div>
                        <% } %>
                    </section>
                    <section class="camp">
                        <p class="label"><label for="password">Contraseña:</label></p>
                        <p class="input">
                            <input 
                                type="password" 
                                placeholder="Ingresa tu contraseña"
                                id="password" 
                                name="password"
                                required
                                disabled
                            >
                        </p>
                        <% if (locals.errors && errors.password) { %>
                            <div class="input-invalid">
                                <%= errors.password.msg %>
                            </div>
                        <% } %>
                    </section>
                    <section class="camp">
                            <p class="label"><label for="password2">Repetir contraseña:</label></p>
                            <p class="input">
                                <input 
                                    type="password" 
                                    placeholder="Repite tu contraseña"
                                    id="password2" 
                                    name="password2"
                                    required
                                    disabled
                                >
                            </p>
                            <% if (locals.errors && errors.password2) { %>
                                <div class="input-invalid">
                                    <%= errors.password2.msg %>
                                </div>
                            <% } %>
                        </p>
                    </section>
                    <section class="camp">
                        <p class="label"><label for="telephone">Teléfono:</label></p>
                        <p class="input">
                            <input 
                            type="text" 
                            placeholder="Ingresa tu número de teléfono" 
                            id="telephone" 
                            name="telephone"
                            value= "<%= locals.oldData ? oldData.telephone : locals.userLogged.telephone %>"
                            disabled
                            >
                        </p>
                        <% if (locals.errors && errors.telephone) { %>
                            <div class="input-invalid">
                                <%= errors.telephone.msg %>
                            </div>
                        <% } %>
                    </section>
                    <section class="camp">
                        <p class="label"><label for="address">Dirección:</label></p>
                        <p class="input">
                            <input 
                            type="text" 
                            placeholder="Ingresa tu dirección" 
                            id="address" 
                            name="address"
                            value= "<%= locals.userLogged.address %>"
                            disabled
                            >
                        </p>
                        <% if (locals.errors && errors.address) { %>
                            <div class="input-invalid">
                                <%= errors.address.msg %>
                            </div>
                        <% } %>
                    </section>
                    <section class="camp">
                        <p class="label"><label for="address">Imagen de Perfil:</label></p>
                        <p class="input"><input type="file" placeholder="Selecciona una foto de perfil" id="image" name="image"></p>
                        <% if (locals.errors && errors.image) { %>
                            <div class="input-invalid">
                                <%= errors.image.msg %>
                            </div>
                            <% } %>
                    </section>
                    <section class="camp" id="updateButton">
                        <p class="buttons" id="button">
                            <button type="submit" id="submit-button" class="hidden">Actualizar</button>
                            <button id="change-button">Modificar</button>
                        </p>
                    </section>
                </div>
            </form>
        
        <section class= "avatarImage">
            
            <img src="/images/users/<%= userLogged.avatar %>"}>
        
        </section>
        
        </main>
        <%- include('../partials/footer') %>
        <script src="/js/updateProfile.js"></script>
</body>
</html>